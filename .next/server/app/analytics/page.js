(()=>{var e={};e.id=109,e.ids=[109],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8751:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(7394),s(1506),s(5866);var l=s(3191),a=s(8716),n=s(7922),o=s.n(n),r=s(5231),i={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>r[e]);s.d(t,i);let d=["",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7394)),"/Users/vishnuheddese/Downloads/sales-commission-dashboard/app/analytics/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/vishnuheddese/Downloads/sales-commission-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/vishnuheddese/Downloads/sales-commission-dashboard/app/analytics/page.tsx"],x="/analytics/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new l.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8235:(e,t,s)=>{Promise.resolve().then(s.bind(s,7937))},7937:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var l=s(326),a=s(7577),n=s(2109),o=s(2859),r=s(1834),i=s(4348),d=s(660),c=s(9844),x=s(8423),p=s(2637),m=s(9997),h=s(9274),u=s(4675),j=s(8564);let g=(0,r.FD)();function f(e){return`${(100*e).toFixed(1)}%`}function b(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}function N(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function v(){let[e,t]=(0,a.useState)("all"),[s,v]=(0,a.useState)("all"),[y,w]=(0,a.useState)("all"),[S,A]=(0,a.useState)("all"),[C,D]=(0,a.useState)("all"),[_,k]=(0,a.useState)("all"),[T,R]=(0,a.useState)(!1),[M,P]=(0,a.useState)("closer"),[B,W]=(0,a.useState)("cl1"),[q,E]=(0,a.useState)("cl2"),[O,z]=(0,a.useState)("morning"),[F,U]=(0,a.useState)("evening"),$=(0,a.useMemo)(()=>g.filter(t=>("all"===e||t.closerId===e)&&("all"===s||(0,i.A2)(t.callAt)===s)&&("all"===y||(0,i.Hq)(t.callAt)===y)&&("all"===S||t.appointmentType===S)&&("all"===C||t.bookingSource===C)&&("all"===_||t.nurtureType===_)),[e,s,y,S,C,_]),K=(0,a.useMemo)(()=>T?"closer"===M?"all"===B?$:$.filter(e=>e.closerId===B):"all"===O?$:$.filter(e=>(0,i.A2)(e.callAt)===O):$,[T,M,$,B,O]),G=(0,a.useMemo)(()=>T?"closer"===M?"all"===q?$:$.filter(e=>e.closerId===q):"all"===F?$:$.filter(e=>(0,i.A2)(e.callAt)===F):[],[T,M,$,q,F]),I=(0,a.useMemo)(()=>(0,i.z6)(K),[K]),L=(0,a.useMemo)(()=>(0,i.Tb)(K),[K]),H=(0,a.useMemo)(()=>(0,i.z6)(G),[G]),X=(0,a.useMemo)(()=>(0,i.Tb)(G),[G]),J=I.totalAppointments>0?I.totalCancelled/I.totalAppointments:0,Q=I.totalAppointments>0?I.totalNoShows/I.totalAppointments:0,V=(()=>{let e=K.filter(e=>"closed_won"===e.dealStage&&"number"==typeof e.salesCycleDays);return e.length?e.reduce((e,t)=>e+(t.salesCycleDays??0),0)/e.length:0})(),Y=I.totalAppointments>0?L.totalRevenue/I.totalAppointments:0,Z=I.totalShows>0?L.totalRevenue/I.totalShows:0,ee=H.totalAppointments>0?H.totalCancelled/H.totalAppointments:0,et=H.totalAppointments>0?H.totalNoShows/H.totalAppointments:0,es=(()=>{let e=G.filter(e=>"closed_won"===e.dealStage&&"number"==typeof e.salesCycleDays);return e.length?e.reduce((e,t)=>e+(t.salesCycleDays??0),0)/e.length:0})(),el=H.totalAppointments>0?X.totalRevenue/H.totalAppointments:0,ea=H.totalShows>0?X.totalRevenue/H.totalShows:0,en=e=>{let t={morning:"Morning (6–12)",afternoon:"Afternoon (12–5)",evening:"Evening (5–9)",night:"Night (9–6)"},s={morning:{total:0,won:0},afternoon:{total:0,won:0},evening:{total:0,won:0},night:{total:0,won:0}};for(let t of e){let e=(0,i.A2)(t.callAt);s[e].total+=1,"closed_won"===t.dealStage&&(s[e].won+=1)}return["morning","afternoon","evening","night"].map(e=>({key:e,label:t[e],appointments:s[e].total,closedWon:s[e].won}))},eo=(0,a.useMemo)(()=>en(K),[K]),er=(0,a.useMemo)(()=>en(G),[G]),ei=(0,a.useMemo)(()=>{let e={morning:"Morning (6–12)",afternoon:"Afternoon (12–5)",evening:"Evening (5–9)",night:"Night (9–6)"};return["morning","afternoon","evening","night"].map(t=>{let s=eo.find(e=>e.key===t),l=er.find(e=>e.key===t);return{bucket:e[t],aClosedWon:s?.closedWon??0,bClosedWon:l?.closedWon??0}})},[eo,er]),ed=(0,a.useMemo)(()=>K.filter(e=>["closed_won","closed_lost"].includes(e.dealStage)).sort((e,t)=>new Date(t.callAt).getTime()-new Date(e.callAt).getTime()).slice(0,8),[K]),ec=(0,a.useMemo)(()=>G.filter(e=>["closed_won","closed_lost"].includes(e.dealStage)).sort((e,t)=>new Date(t.callAt).getTime()-new Date(e.callAt).getTime()).slice(0,8),[G]);return l.jsx(n.r,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[l.jsx("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Analytics"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Deep dive into appointments, outcomes, and economics. Turn on comparison to benchmark closers or time-of-day windows."})]})}),l.jsx(o.S,{closerId:e,onCloserChange:t,timeOfDay:s,onTimeOfDayChange:v,dayOfWeek:y,onDayOfWeekChange:w,appointmentType:S,onAppointmentTypeChange:A,bookingSource:C,onBookingSourceChange:D,nurtureType:_,onNurtureTypeChange:k,comparisonEnabled:T,onToggleComparison:()=>R(e=>!e)}),T&&(0,l.jsxs)("section",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[l.jsx("div",{className:"flex items-center justify-between gap-2",children:(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-medium",children:"Comparison settings"}),l.jsx("p",{className:"text-[11px] text-slate-400",children:"Compare two closers, or two time-of-day windows, inside the current filters."})]})}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("span",{className:"text-[11px] text-slate-400",children:"Compare by:"}),l.jsx("button",{type:"button",onClick:()=>P("closer"),className:`text-[11px] px-3 py-1 rounded-full border transition ${"closer"===M?"border-indigo-500 bg-indigo-500/10 text-indigo-200":"border-slate-700 text-slate-300 hover:border-slate-500"}`,children:"Closer"}),l.jsx("button",{type:"button",onClick:()=>P("timeOfDay"),className:`text-[11px] px-3 py-1 rounded-full border transition ${"timeOfDay"===M?"border-indigo-500 bg-indigo-500/10 text-indigo-200":"border-slate-700 text-slate-300 hover:border-slate-500"}`,children:"Time of day"})]}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 mt-2",children:[(0,l.jsxs)("div",{className:"bg-slate-950/60 border border-slate-800 rounded-xl p-3 text-xs space-y-2",children:[l.jsx("p",{className:"text-[11px] font-semibold text-indigo-300",children:"Segment A"}),"closer"===M?(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[11px] text-slate-400",children:"Closer"}),(0,l.jsxs)("select",{className:"w-full bg-slate-900 border border-slate-700 rounded-md px-2 py-1 text-[11px] text-slate-100",value:B,onChange:e=>W(e.target.value),children:[r.KF.map(e=>l.jsx("option",{value:e.id,children:e.name},e.id)),l.jsx("option",{value:"all",children:"All closers"})]})]}):(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[11px] text-slate-400",children:"Time of day"}),(0,l.jsxs)("select",{className:"w-full bg-slate-900 border border-slate-700 rounded-md px-2 py-1 text-[11px] text-slate-100",value:O,onChange:e=>z(e.target.value),children:[l.jsx("option",{value:"morning",children:"Morning (6–12)"}),l.jsx("option",{value:"afternoon",children:"Afternoon (12–5)"}),l.jsx("option",{value:"evening",children:"Evening (5–9)"}),l.jsx("option",{value:"night",children:"Night (9–6)"}),l.jsx("option",{value:"all",children:"All times"})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-950/60 border border-slate-800 rounded-xl p-3 text-xs space-y-2",children:[l.jsx("p",{className:"text-[11px] font-semibold text-emerald-300",children:"Segment B"}),"closer"===M?(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[11px] text-slate-400",children:"Closer"}),(0,l.jsxs)("select",{className:"w-full bg-slate-900 border border-slate-700 rounded-md px-2 py-1 text-[11px] text-slate-100",value:q,onChange:e=>E(e.target.value),children:[r.KF.map(e=>l.jsx("option",{value:e.id,children:e.name},e.id)),l.jsx("option",{value:"all",children:"All closers"})]})]}):(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[11px] text-slate-400",children:"Time of day"}),(0,l.jsxs)("select",{className:"w-full bg-slate-900 border border-slate-700 rounded-md px-2 py-1 text-[11px] text-slate-100",value:F,onChange:e=>U(e.target.value),children:[l.jsx("option",{value:"morning",children:"Morning (6–12)"}),l.jsx("option",{value:"afternoon",children:"Afternoon (12–5)"}),l.jsx("option",{value:"evening",children:"Evening (5–9)"}),l.jsx("option",{value:"night",children:"Night (9–6)"}),l.jsx("option",{value:"all",children:"All times"})]})]})]})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-medium",children:"Segment A metrics"}),l.jsx("p",{className:"text-[11px] text-slate-400",children:"Base filters + Segment A selection."})]}),(0,l.jsxs)("span",{className:"text-[10px] text-indigo-300",children:[K.length," calls"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-2 text-xs",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Total appointments"}),l.jsx("p",{className:"font-semibold text-slate-100",children:I.totalAppointments})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Show-up rate"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(I.showRate)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Close rate (on shows)"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(I.closeRateOnShows)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Cancel rate"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(J)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"No-show rate"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(Q)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Avg days in sales cycle"}),l.jsx("p",{className:"font-semibold text-slate-100",children:V.toFixed(1)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Revenue (closed won)"}),l.jsx("p",{className:"font-semibold text-slate-100",children:b(L.totalRevenue)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Revenue per call"}),l.jsx("p",{className:"font-semibold text-slate-100",children:b(Y)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Revenue per show"}),l.jsx("p",{className:"font-semibold text-slate-100",children:b(Z)})]})]})]}),T&&(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-medium",children:"Segment B metrics"}),l.jsx("p",{className:"text-[11px] text-slate-400",children:"Base filters + Segment B selection."})]}),(0,l.jsxs)("span",{className:"text-[10px] text-emerald-300",children:[G.length," calls"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-2 text-xs",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Total appointments"}),l.jsx("p",{className:"font-semibold text-slate-100",children:H.totalAppointments})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Show-up rate"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(H.showRate)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Close rate (on shows)"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(H.closeRateOnShows)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Cancel rate"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(ee)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"No-show rate"}),l.jsx("p",{className:"font-semibold text-slate-100",children:f(et)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Avg days in sales cycle"}),l.jsx("p",{className:"font-semibold text-slate-100",children:es.toFixed(1)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Revenue (closed won)"}),l.jsx("p",{className:"font-semibold text-slate-100",children:b(X.totalRevenue)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Revenue per call"}),l.jsx("p",{className:"font-semibold text-slate-100",children:b(el)})]}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] text-slate-400",children:"Revenue per show"}),l.jsx("p",{className:"font-semibold text-slate-100",children:b(ea)})]})]})]})]}),(0,l.jsxs)("section",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[l.jsx("div",{className:"flex items-center justify-between gap-2",children:(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-medium",children:"Time-of-day performance"}),l.jsx("p",{className:"text-[11px] text-slate-400",children:"Closed won deals by time of day. When comparison is on, both segments are overlaid."})]})}),l.jsx("div",{className:"h-64",children:l.jsx(d.h,{width:"100%",height:"100%",children:(0,l.jsxs)(c.v,{data:ei,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(x.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),l.jsx(p.K,{dataKey:"bucket",tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#4b5563"}}),l.jsx(m.B,{tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#4b5563"},allowDecimals:!1}),l.jsx(h.D,{wrapperStyle:{fontSize:"10px",color:"#9ca3af"}}),l.jsx(u.u,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"#020617",border:"1px solid #ffffffff",borderRadius:"0.5rem",fontSize:"0.75rem"},labelStyle:{color:"#e5e7eb"},itemStyle:{color:"#f9fafb"},formatter:e=>[String(e),"Closed won deals"]}),l.jsx(j.$,{dataKey:"aClosedWon",name:T?"Segment A closed won":"Closed won deals",radius:[4,4,0,0],fill:"#6366f1"}),T&&l.jsx(j.$,{dataKey:"bClosedWon",name:"Segment B closed won",radius:[4,4,0,0],fill:"#22c55e"})]})})})]}),(0,l.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-medium",children:"Recent deals – Segment A"}),l.jsx("p",{className:"text-[11px] text-slate-400",children:"Closed won and lost after Segment A filters."})]})}),l.jsx("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[l.jsx("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800",children:[l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Date / time"}),l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Closer"}),l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Stage"}),l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Amount"})]})}),(0,l.jsxs)("tbody",{children:[ed.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-900 last:border-0",children:[l.jsx("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:N(e.callAt)}),l.jsx("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.closerName}),l.jsx("td",{className:`py-1.5 px-2 text-[11px] capitalize whitespace-nowrap ${"closed_won"===e.dealStage?"text-emerald-400":"text-rose-400"}`,children:e.dealStage.replace("_"," ")}),l.jsx("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.amount?b(e.amount):"-"})]},e.id)),0===ed.length&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"py-2 text-[11px] text-slate-500",children:"No deals found for Segment A."})})]})]})})]}),T&&(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-medium",children:"Recent deals – Segment B"}),l.jsx("p",{className:"text-[11px] text-slate-400",children:"Closed won and lost after Segment B filters."})]})}),l.jsx("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[l.jsx("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800",children:[l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Date / time"}),l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Closer"}),l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Stage"}),l.jsx("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Amount"})]})}),(0,l.jsxs)("tbody",{children:[ec.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-900 last:border-0",children:[l.jsx("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:N(e.callAt)}),l.jsx("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.closerName}),l.jsx("td",{className:`py-1.5 px-2 text-[11px] capitalize whitespace-nowrap ${"closed_won"===e.dealStage?"text-emerald-400":"text-rose-400"}`,children:e.dealStage.replace("_"," ")}),l.jsx("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.amount?b(e.amount):"-"})]},e.id)),0===ec.length&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"py-2 text-[11px] text-slate-500",children:"No deals found for Segment B."})})]})]})})]})]})]})})}},7394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(8570).createProxy)(String.raw`/Users/vishnuheddese/Downloads/sales-commission-dashboard/app/analytics/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),l=t.X(0,[819,496,632,292],()=>s(8751));module.exports=l})();