(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{70788:function(e,t,s){Promise.resolve().then(s.bind(s,2462))},2462:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var l=s(57437),a=s(2265),r=s(89620),o=s(57341),c=s(14482),n=s(3548);let d=(0,c.FD)(),x=new Date("2025-01-01T15:00:00Z");function i(e){return"".concat((100*e).toFixed(1),"%")}function p(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}function h(){let[e,t]=(0,a.useState)("all"),[s,c]=(0,a.useState)("all"),[h,m]=(0,a.useState)("all"),[u,j]=(0,a.useState)("all"),[N,f]=(0,a.useState)("all"),[g,w]=(0,a.useState)("all"),y=(0,a.useMemo)(()=>d.filter(t=>("all"===e||t.closerId===e)&&("all"===s||(0,n.A2)(t.callAt)===s)&&("all"===h||(0,n.Hq)(t.callAt)===h)&&("all"===u||t.appointmentType===u)&&("all"===N||t.bookingSource===N)&&("all"===g||t.nurtureType===g)),[e,s,h,u,N,g]),b=(0,a.useMemo)(()=>(function(e){let t={};for(let s of e){t[s.closerId]||(t[s.closerId]={closerId:s.closerId,closerName:s.closerName,totalCalls:0,totalShows:0,totalNoShows:0,totalCancelled:0,closeRate:0,showRate:0,revenue:0,revenuePerAppt:0,revenuePerShow:0});let e=t[s.closerId];e.totalCalls+=1,"show"===s.callStatus&&(e.totalShows+=1),"no_show"===s.callStatus&&(e.totalNoShows+=1),"cancelled"===s.callStatus&&(e.totalCancelled+=1),"closed_won"===s.dealStage&&s.amount&&(e.revenue+=s.amount)}let s=[];for(let l in t){if(!Object.prototype.hasOwnProperty.call(t,l))continue;let a=t[l],r=e.filter(e=>e.closerId===l&&"closed_won"===e.dealStage).length;a.closeRate=a.totalCalls>0?r/a.totalCalls:0,a.showRate=a.totalCalls>0?a.totalShows/a.totalCalls:0,a.revenuePerAppt=a.totalCalls>0?a.revenue/a.totalCalls:0,a.revenuePerShow=a.totalShows>0?a.revenue/a.totalShows:0,s.push(a)}return s.sort((e,t)=>t.revenue-e.revenue)})(y),[y]),v=(0,a.useMemo)(()=>(function(e){let t={redzone:{nurtureType:"redzone",total:0,shows:0,closedWon:0,revenue:0,showRate:0,closeRate:0},short_term:{nurtureType:"short_term",total:0,shows:0,closedWon:0,revenue:0,showRate:0,closeRate:0},long_term:{nurtureType:"long_term",total:0,shows:0,closedWon:0,revenue:0,showRate:0,closeRate:0}};for(let s of e){let e=t[s.nurtureType];e.total+=1,"show"===s.callStatus&&(e.shows+=1),"closed_won"===s.dealStage&&(e.closedWon+=1,s.amount&&(e.revenue+=s.amount))}for(let e in t){let s=t[e];s.showRate=s.total?s.shows/s.total:0,s.closeRate=s.total?s.closedWon/s.total:0}return[t.redzone,t.short_term,t.long_term]})(y),[y]),S=(0,a.useMemo)(()=>(function(e){let t=["Organic","Paid Ads","Triage","Referral"],s=["redzone","short_term","long_term"],l={redzone:{Organic:{total:0,closedWon:0,closeRate:0},"Paid Ads":{total:0,closedWon:0,closeRate:0},Triage:{total:0,closedWon:0,closeRate:0},Referral:{total:0,closedWon:0,closeRate:0}},short_term:{Organic:{total:0,closedWon:0,closeRate:0},"Paid Ads":{total:0,closedWon:0,closeRate:0},Triage:{total:0,closedWon:0,closeRate:0},Referral:{total:0,closedWon:0,closeRate:0}},long_term:{Organic:{total:0,closedWon:0,closeRate:0},"Paid Ads":{total:0,closedWon:0,closeRate:0},Triage:{total:0,closedWon:0,closeRate:0},Referral:{total:0,closedWon:0,closeRate:0}}};for(let t of e){let e=l[t.nurtureType][t.bookingSource];e.total+=1,"closed_won"===t.dealStage&&(e.closedWon+=1)}for(let e of s)for(let s of t){let t=l[e][s];t.closeRate=t.total?t.closedWon/t.total:0}return{sources:t,nurtures:s,matrix:l}})(y),[y]),R=(0,a.useMemo)(()=>(function(e){let t=x.getTime(),s=t-2592e6,l=t-5184e6,a=e.filter(e=>{let l=new Date(e.callAt).getTime();return l>=s&&l<t}),r=e.filter(e=>{let t=new Date(e.callAt).getTime();return t>=l&&t<s}),o=e=>{let t={};for(let s of e){t[s.closerId]||(t[s.closerId]={closerName:s.closerName,total:0,shows:0,closedWon:0});let e=t[s.closerId];e.total+=1,"show"===s.callStatus&&(e.shows+=1),"closed_won"===s.dealStage&&(e.closedWon+=1)}return t},c=o(a),n=o(r),d=[];for(let e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;let t=n[e],s=c[e];if(!s||t.total<8||s.total<8)continue;let l=t.total>0?t.shows/t.total:0,a=s.total>0?s.shows/s.total:0,r=t.total>0?t.closedWon/t.total:0,o=s.total>0?s.closedWon/s.total:0,x=l-a,i=r-o;x>.1&&d.push({closerId:e,closerName:t.closerName,metric:"showRate",previous:l,current:a,delta:x}),i>.1&&d.push({closerId:e,closerName:t.closerName,metric:"closeRate",previous:r,current:o,delta:i})}return d.sort((e,t)=>t.delta-e.delta)})(y),[y]),C=(0,a.useMemo)(()=>[...y].sort((e,t)=>new Date(t.callAt).getTime()-new Date(e.callAt).getTime()),[y]);return(0,l.jsx)(r.r,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Coaching & Rep Insights"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Scorecards, nurture performance, and call outcomes to run better 1:1s."})]})}),(0,l.jsx)(o.S,{closerId:e,onCloserChange:t,timeOfDay:s,onTimeOfDayChange:c,dayOfWeek:h,onDayOfWeekChange:m,appointmentType:u,onAppointmentTypeChange:j,bookingSource:N,onBookingSourceChange:f,nurtureType:g,onNurtureTypeChange:w,comparisonEnabled:!1,onToggleComparison:()=>{}}),(0,l.jsxs)("section",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Closer scorecards"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Performance metrics per closer after filters."})]})}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[b.map(e=>(0,l.jsxs)("div",{className:"bg-slate-950/60 border border-slate-800 rounded-xl p-3 text-xs space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-100",children:e.closerName}),(0,l.jsxs)("span",{className:"text-[11px] text-slate-500",children:[e.totalCalls," calls"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1.5 mt-1",children:[(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Show rate"}),(0,l.jsx)("span",{children:i(e.showRate)}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Close rate"}),(0,l.jsx)("span",{children:i(e.closeRate)}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"No-show rate"}),(0,l.jsx)("span",{children:e.totalCalls?i(e.totalNoShows/e.totalCalls):"0.0%"}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Revenue"}),(0,l.jsx)("span",{children:p(e.revenue)}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Rev / appt"}),(0,l.jsx)("span",{children:p(e.revenuePerAppt)}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Rev / show"}),(0,l.jsx)("span",{children:p(e.revenuePerShow)})]})]},e.closerId)),0===b.length&&(0,l.jsx)("p",{className:"text-[11px] text-slate-500",children:"No calls found for the current filters."})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Nurture conversion"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"How redzone, short-term, and long-term leads are performing."})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[v.map(e=>(0,l.jsxs)("div",{className:"bg-slate-950/60 border border-slate-800 rounded-xl px-3 py-2 text-xs flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"font-semibold capitalize",children:"redzone"===e.nurtureType?"Redzone (≤7 days)":"short_term"===e.nurtureType?"Short term (7–30 days)":"Long term (30+ days)"}),(0,l.jsxs)("span",{className:"text-[11px] text-slate-500",children:[e.total," leads"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Show rate"}),(0,l.jsx)("span",{children:i(e.showRate)}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Close rate"}),(0,l.jsx)("span",{children:i(e.closeRate)}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Closed won"}),(0,l.jsx)("span",{children:e.closedWon}),(0,l.jsx)("span",{className:"text-[11px] text-slate-400",children:"Revenue"}),(0,l.jsx)("span",{children:p(e.revenue)})]})]},e.nurtureType)),0===v.length&&(0,l.jsx)("p",{className:"text-[11px] text-slate-500",children:"No nurture data for current filters."})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsx)("div",{children:(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Lead source \xd7 nurture matrix"})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,l.jsx)("th",{className:"py-1.5 pr-2 text-left text-[11px] text-slate-400",children:"Nurture"}),S.sources.map(e=>(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:e},e))]})}),(0,l.jsx)("tbody",{children:S.nurtures.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-900 last:border-0",children:[(0,l.jsx)("td",{className:"py-1.5 pr-2 text-[11px] text-slate-300",children:"redzone"===e?"Redzone":"short_term"===e?"Short":"Long"}),S.sources.map(t=>{let s=S.matrix[e][t];return(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300",children:0===s.total?(0,l.jsx)("span",{className:"text-slate-600",children:"-"}):(0,l.jsxs)("span",{children:[s.total," •"," ",i(s.closeRate)]})},t)})]},e))})]})})]})]}),(0,l.jsxs)("section",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Red flags (30d vs previous 30d)"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Significant drops in show rate or close rate."})]})}),0===R.length?(0,l.jsx)("p",{className:"text-[11px] text-slate-500",children:"No major drops detected for the last 30 days with the current filters."}):(0,l.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:R.map((e,t)=>(0,l.jsxs)("div",{className:"bg-slate-950/60 border border-rose-500/60 rounded-xl px-3 py-2 text-xs",children:[(0,l.jsxs)("p",{className:"font-semibold text-rose-300 mb-1",children:[e.closerName," –"," ","showRate"===e.metric?"Show rate":"Close rate"," ","dropped"]}),(0,l.jsxs)("p",{className:"text-[11px] text-slate-200",children:[i(e.previous)," →"," ",i(e.current)," ",(0,l.jsxs)("span",{className:"text-rose-400",children:["(−",(100*e.delta).toFixed(1)," pts)"]})]})]},"".concat(e.closerId,"-").concat(e.metric,"-").concat(t)))})]}),(0,l.jsxs)("section",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 space-y-3",children:[(0,l.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Call outcome explorer"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Drill into individual calls behind your metrics."})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Date / time"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Closer"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Status"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Stage"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Amount"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Source"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Nurture"})]})}),(0,l.jsxs)("tbody",{children:[C.slice(0,80).map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-900 last:border-0",children:[(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:new Date(e.callAt).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.closerName}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 capitalize",children:e.callStatus.replace("_"," ")}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 capitalize",children:e.dealStage.replace("_"," ")}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.amount?p(e.amount):"-"}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 whitespace-nowrap",children:e.bookingSource}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 whitespace-nowrap capitalize",children:e.nurtureType.replace("_"," ")})]},e.id)),0===C.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"py-2 text-[11px] text-slate-500",children:"No calls found for the current filters."})})]})]})})]})]})})}}},function(e){e.O(0,[448,99,971,117,744],function(){return e(e.s=70788)}),_N_E=e.O()}]);