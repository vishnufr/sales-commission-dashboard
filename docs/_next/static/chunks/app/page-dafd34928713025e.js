(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{95043:function(e,t,s){Promise.resolve().then(s.bind(s,57340))},57340:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var l=s(57437),a=s(2265),r=s(89620),o=s(57341),n=s(14482),i=s(3548),c=s(47625),d=s(75169),x=s(3574),h=s(20407),p=s(8147),m=s(77031),u=s(56940),f=s(97059),j=s(62994),b=s(22190),g=s(31699);let N=(0,n.FD)();function w(e){return"".concat((100*e).toFixed(1),"%")}function y(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}function v(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function S(){let[e,t]=(0,a.useState)("all"),[s,n]=(0,a.useState)("all"),[S,k]=(0,a.useState)("all"),[C,_]=(0,a.useState)("all"),[D,A]=(0,a.useState)("all"),[T,R]=(0,a.useState)("all"),[M,O]=(0,a.useState)(null),z=(0,a.useMemo)(()=>N.filter(t=>("all"===e||t.closerId===e)&&("all"===s||(0,i.A2)(t.callAt)===s)&&("all"===S||(0,i.Hq)(t.callAt)===S)&&("all"===C||t.appointmentType===C)&&("all"===D||t.bookingSource===D)&&("all"===T||t.nurtureType===T)),[e,s,S,C,D,T]),L=(0,a.useMemo)(()=>(0,i.z6)(z),[z]),q=(0,a.useMemo)(()=>(0,i.Tb)(z),[z]),E=(0,a.useMemo)(()=>{let e={closed_won:0,closed_lost:0,follow_up:0,unqualified:0};for(let t of z)e[t.dealStage]=(e[t.dealStage]||0)+1;return[{key:"closed_won",label:"Closed won",value:e.closed_won},{key:"closed_lost",label:"Closed lost",value:e.closed_lost},{key:"follow_up",label:"Follow up",value:e.follow_up},{key:"unqualified",label:"Unqualified",value:e.unqualified}]},[z]),K=(0,a.useMemo)(()=>{let e={Organic:0,"Paid Ads":0,Triage:0,Referral:0};for(let t of z)"closed_won"===t.dealStage&&(e[t.bookingSource]+=1);return["Organic","Paid Ads","Triage","Referral"].map(t=>({source:t,deals:e[t]}))},[z]),P=(0,a.useMemo)(()=>[...z].sort((e,t)=>new Date(t.callAt).getTime()-new Date(e.callAt).getTime()).slice(0,10),[z]),F=(0,a.useMemo)(()=>z.filter(e=>["closed_won","closed_lost"].includes(e.dealStage)).sort((e,t)=>new Date(t.callAt).getTime()-new Date(e.callAt).getTime()).slice(0,10),[z]),[U,W]=(0,a.useState)(null),[B,I]=(0,a.useState)(null),H=["#22c55e","#ef4444","#f97316","#6366f1"];return(0,l.jsx)(r.r,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold tracking-tight",children:"Dashboard"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Real-time view of appointments, pipeline, and commission performance."})]})}),(0,l.jsx)(o.S,{closerId:e,onCloserChange:t,timeOfDay:s,onTimeOfDayChange:n,dayOfWeek:S,onDayOfWeekChange:k,appointmentType:C,onAppointmentTypeChange:_,bookingSource:D,onBookingSourceChange:A,nurtureType:T,onNurtureTypeChange:R,comparisonEnabled:!1,onToggleComparison:()=>{}}),(0,l.jsxs)("section",{className:"grid gap-4 md:grid-cols-4",children:[(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl px-4 py-3 transition-transform transition-shadow duration-150 hover:scale-[1.02] hover:shadow-lg hover:shadow-indigo-500/20",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Revenue (closed won)"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:y(q.totalRevenue)}),(0,l.jsx)("p",{className:"text-[11px] text-slate-500 mt-1",children:"Only deals that actually closed."})]}),(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl px-4 py-3 transition-transform transition-shadow duration-150 hover:scale-[1.02] hover:shadow-lg hover:shadow-indigo-500/20",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Total appointments"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:L.totalAppointments.toLocaleString()}),(0,l.jsx)("p",{className:"text-[11px] text-slate-500 mt-1",children:"Calls after all filters."})]}),(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl px-4 py-3 transition-transform transition-shadow duration-150 hover:scale-[1.02] hover:shadow-lg hover:shadow-indigo-500/20",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Show-up rate"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:w(L.showRate)}),(0,l.jsxs)("p",{className:"text-[11px] text-slate-500 mt-1",children:[L.totalShows," shows /"," ",L.totalAppointments," booked"]})]}),(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl px-4 py-3 transition-transform transition-shadow duration-150 hover:scale-[1.02] hover:shadow-lg hover:shadow-indigo-500/20",children:[(0,l.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Close rate (on shows)"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:w(L.closeRateOnShows)}),(0,l.jsx)("p",{className:"text-[11px] text-slate-500 mt-1",children:"Shows that became closed won."})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{onClick:()=>O(e=>"stage"===e?null:"stage"),className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 cursor-pointer\n                        transition-all duration-150\n                        hover:scale-[1.01] hover:shadow-lg hover:shadow-indigo-500/20\n                        ".concat("stage"===M?"md:col-span-2 md:h-[360px]":""),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Pipeline breakdown"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Distribution of deals by stage (after filters)."})]}),(0,l.jsxs)("span",{className:"text-[10px] text-slate-500",children:["Click to ","stage"===M?"shrink":"expand"]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[(0,l.jsx)("div",{className:"flex-1 h-64",children:(0,l.jsx)(c.h,{width:"100%",height:"100%",children:(0,l.jsxs)(d.u,{children:[(0,l.jsx)(x.b,{data:E,dataKey:"value",nameKey:"label",cx:"50%",cy:"50%",innerRadius:40,outerRadius:null===U?80:70,paddingAngle:2,onMouseEnter:(e,t)=>W(t),onMouseLeave:()=>W(null),children:E.map((e,t)=>(0,l.jsx)(h.b,{fill:H[t%H.length],stroke:U===t?"#e5e7eb":"#020617",strokeWidth:U===t?2:1},e.key))}),(0,l.jsx)(p.u,{contentStyle:{backgroundColor:"#020617",border:"1px solid #1f2937",borderRadius:"0.5rem",fontSize:"0.75rem",color:"#ffffffff"},formatter:(e,t,s)=>{let{payload:l}=s;return["".concat(e),l.label]}})]})})}),(0,l.jsx)("div",{className:"flex-1 space-y-1 text-xs",children:E.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:H[t%H.length]}}),(0,l.jsx)("span",{className:"text-slate-200",children:e.label})]}),(0,l.jsx)("span",{className:"text-slate-400",children:e.value})]},e.key))})]})]}),(0,l.jsxs)("div",{onClick:()=>O(e=>"source"===e?null:"source"),className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4 cursor-pointer\n                        transition-all duration-150\n                        hover:scale-[1.01] hover:shadow-lg hover:shadow-indigo-500/20\n                        ".concat("source"===M?"md:col-span-2 md:h-[360px]":""),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Deals by booking source"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Closed won deals by booking source (Organic, Paid Ads, Triage, Referral)."})]}),(0,l.jsxs)("span",{className:"text-[10px] text-slate-500",children:["Click to ","source"===M?"shrink":"expand"]})]}),(0,l.jsx)("div",{className:"h-64",children:(0,l.jsx)(c.h,{width:"100%",height:"100%",children:(0,l.jsxs)(m.v,{data:K,margin:{top:10,right:10,left:0,bottom:0},children:[(0,l.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,l.jsx)(f.K,{dataKey:"source",tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#4b5563"}}),(0,l.jsx)(j.B,{tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#4b5563"},allowDecimals:!1}),(0,l.jsx)(b.D,{wrapperStyle:{fontSize:"10px",color:"#9ca3af"}}),(0,l.jsx)(p.u,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"#020617",border:"1px solid #1f2937",borderRadius:"0.5rem",fontSize:"0.75rem"},labelStyle:{color:"#e5e7eb"},itemStyle:{color:"#f9fafb"},formatter:e=>[String(e),"Closed won deals"]}),(0,l.jsx)(g.$,{dataKey:"deals",name:"Closed won deals",fill:"#0ea5e9",onMouseEnter:(e,t)=>I(t),onMouseLeave:()=>I(null),radius:[4,4,0,0],children:K.map((e,t)=>(0,l.jsx)(h.b,{fill:B===t?"#38bdf8":"#0ea5e9",stroke:B===t?"#ffffff":"none",strokeWidth:B===t?2:0},"cell-".concat(t)))})]})})})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Recent calls"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Latest appointments after filters."})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Date / time"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Closer"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Status"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Stage"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Source"})]})}),(0,l.jsxs)("tbody",{children:[P.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-900 last:border-0",children:[(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:v(e.callAt)}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.closerName}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 capitalize",children:e.callStatus.replace("_"," ")}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 capitalize",children:e.dealStage.replace("_"," ")}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 whitespace-nowrap",children:e.bookingSource})]},e.id)),0===P.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"py-2 text-[11px] text-slate-500",children:"No calls found for the current filters."})})]})]})})]}),(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sm font-medium",children:"Recent deals"}),(0,l.jsx)("p",{className:"text-[11px] text-slate-400",children:"Closed won and closed lost, newest first."})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-xs",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Date / time"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Closer"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Stage"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Amount"}),(0,l.jsx)("th",{className:"py-1.5 px-2 text-left text-[11px] text-slate-400",children:"Source"})]})}),(0,l.jsxs)("tbody",{children:[F.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-900 last:border-0",children:[(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:v(e.callAt)}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.closerName}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] capitalize whitespace-nowrap ".concat("closed_won"===e.dealStage?"text-emerald-400":"text-rose-400"),children:e.dealStage.replace("_"," ")}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-200 whitespace-nowrap",children:e.amount?y(e.amount):"-"}),(0,l.jsx)("td",{className:"py-1.5 px-2 text-[11px] text-slate-300 whitespace-nowrap",children:e.bookingSource})]},e.id)),0===F.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"py-2 text-[11px] text-slate-500",children:"No deals found for the current filters."})})]})]})})]})]})]})})}}},function(e){e.O(0,[448,447,169,99,971,117,744],function(){return e(e.s=95043)}),_N_E=e.O()}]);